---
// Props que recibe el componente (Datos del producto)
const { producto, precio, telefonoNegocio } = Astro.props;
---

<button 
  class="btn-whatsapp" 
  data-producto={producto} 
  data-precio={precio}
  data-tel={telefonoNegocio}
>
  Pedir {producto} por WhatsApp ðŸ“±
</button>

<script>
  // Buscamos todos los botones de whatsapp en la pÃ¡gina
  const botones = document.querySelectorAll('.btn-whatsapp');

  botones.forEach(btn => {
    btn.addEventListener('click', (e) => {
      // 1. Leemos los datos del botÃ³n (dataset)
      const prod = btn.dataset.producto;
      const precio = btn.dataset.precio;
      const tel = btn.dataset.tel;

      // 2. Creamos el mensaje
      // %0A es un salto de lÃ­nea en lenguaje URL
      const mensaje = `Hola! ðŸ‘‹ Me interesa hacer un pedido:%0A%0A- Producto: *${prod}*%0A- Precio: $${precio}%0A%0AMe confirmas disponibilidad?`;

      // 3. Construimos la URL oficial de WhatsApp API
      const url = `https://wa.me/${tel}?text=${mensaje}`;

      // 4. Abrimos WhatsApp en otra pestaÃ±a
      window.open(url, '_blank');
    });
  });
</script>

<style>
  .btn-whatsapp {
    background-color: #25D366;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
  }
  .btn-whatsapp:hover {
    background-color: #128C7E;
  }
</style>